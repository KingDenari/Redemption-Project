{% extends "base.html" %}

{% block title %} Login {% endblock %}

{% block content %}
<div class="container">
  <h2 class="text-center my-4">Welcome Back</h2>
  <h5 class="text-center my-4">To access the home webpage, please login</h5>

  <!-- Flash Messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ 'danger' if category == 'error' else 'success' }} alert-dismissible fade show mt-3" role="alert">
          {{ message }}
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form method="POST" class="card p-4 shadow" style="max-width: 500px; margin: 0 auto;">
    <div class="form-group mb-3">
      <label for="email" class="font-weight-bold">Email Address</label>
      <input type="email" class="form-control" id="email" name="email" required 
             placeholder="Enter your email" value="{{ request.form.email if request.form }}">
    </div>

    <div class="form-group mb-3">
      <label for="password" class="font-weight-bold">Password</label>
      <input type="password" class="form-control" id="password" name="password" required 
             placeholder="Enter your password">
    </div>

    <button type="submit" class="btn btn-primary btn-block">Login</button>
    
    <div class="text-center mt-3">
      <small class="text-muted">By continuing, you agree to our <a href="/terms" class="text-decoration-none">Terms of Use</a></small>
    </div>
  </form>

  <p class="text-center mt-3">
    Don't have an account? <a href="{{ url_for('auth.sign_up') }}" class="text-decoration-none font-weight-bold">Sign up here</a>.
  </p>

</div>

<script>
// Auto-dismiss alerts after 5 seconds
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
        $('.alert').alert('close');
    }, 5000);
});
</script>
{% endblock %}
